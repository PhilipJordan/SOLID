<?xml version="1.0" encoding="IBM437"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=IBM437" http-equiv="Content-Type" />

  <title>Class: Bundler::Installer</title>

  <link rel="stylesheet" href="../rdoc.css" type="text/css" media="screen" />

  <script src="../js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/thickbox-compressed.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/quicksearch.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/darkfish.js" type="text/javascript" charset="utf-8"></script>

</head>
<body id="top" class="class">

  <div id="metadata">
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="../index.html">Home</a>
          <a href="../index.html#classes">Classes</a>
          <a href="../index.html#methods">Methods</a>
        </h3>
      </div>
    </div>

    <div id="file-metadata">
      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul>
          
            <li><a href="../lib/bundler/installer_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/bundler/installer.rb">lib/bundler/installer.rb</a></li>
          
          </ul>
        </div>
      </div>

      
    </div>

    <div id="class-metadata">
      
      <!-- Parent Class -->
      <div id="parent-class-section" class="section">
        <h3 class="section-header">Parent</h3>
        
        <p class="link"><a href="Environment.html">Bundler::Environment</a></p>
        
      </div>
      

      

      

      
      <!-- Method Quickref -->
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
          <li><a href="#method-c-install">::install</a></li>
          
          <li><a href="#method-i-generate_bundler_executable_stubs">#generate_bundler_executable_stubs</a></li>
          
          <li><a href="#method-i-install_gem_from_spec">#install_gem_from_spec</a></li>
          
          <li><a href="#method-i-run">#run</a></li>
          
        </ul>
      </div>
      

      
    </div>

    <div id="project-metadata">
      
      
      <div id="fileindex-section" class="section project-section">
        <h3 class="section-header">Files</h3>
        <ul>
        
          <li class="file"><a href="../lib/bundler/man/bundle.html">bundle</a></li>
        
          <li class="file"><a href="../lib/bundler/man/bundle-config.html">bundle-config</a></li>
        
          <li class="file"><a href="../lib/bundler/man/bundle-config_txt.html">bundle-config.txt</a></li>
        
          <li class="file"><a href="../lib/bundler/man/bundle-exec.html">bundle-exec</a></li>
        
          <li class="file"><a href="../lib/bundler/man/bundle-exec_txt.html">bundle-exec.txt</a></li>
        
          <li class="file"><a href="../lib/bundler/man/bundle-install.html">bundle-install</a></li>
        
          <li class="file"><a href="../lib/bundler/man/bundle-install_txt.html">bundle-install.txt</a></li>
        
          <li class="file"><a href="../lib/bundler/man/bundle-package.html">bundle-package</a></li>
        
          <li class="file"><a href="../lib/bundler/man/bundle-package_txt.html">bundle-package.txt</a></li>
        
          <li class="file"><a href="../lib/bundler/man/bundle-platform.html">bundle-platform</a></li>
        
          <li class="file"><a href="../lib/bundler/man/bundle-platform_txt.html">bundle-platform.txt</a></li>
        
          <li class="file"><a href="../lib/bundler/man/bundle-update.html">bundle-update</a></li>
        
          <li class="file"><a href="../lib/bundler/man/bundle-update_txt.html">bundle-update.txt</a></li>
        
          <li class="file"><a href="../lib/bundler/man/bundle_txt.html">bundle.txt</a></li>
        
          <li class="file"><a href="../lib/bundler/man/gemfile_5_txt.html">gemfile.5.txt</a></li>
        
          <li class="file"><a href="../lib/bundler/templates/Executable.html">Executable</a></li>
        
          <li class="file"><a href="../lib/bundler/templates/Gemfile.html">Gemfile</a></li>
        
        </ul>
      </div>
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class/Module Index
          <span class="search-toggle"><img src="../images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
        
          <li><a href="../Bundler.html">Bundler</a></li>
        
          <li><a href="../Bundler/BundlerError.html">Bundler::BundlerError</a></li>
        
          <li><a href="../Bundler/CLI.html">Bundler::CLI</a></li>
        
          <li><a href="../Bundler/CLI/Binstubs.html">Bundler::CLI::Binstubs</a></li>
        
          <li><a href="../Bundler/CLI/Cache.html">Bundler::CLI::Cache</a></li>
        
          <li><a href="../Bundler/CLI/Check.html">Bundler::CLI::Check</a></li>
        
          <li><a href="../Bundler/CLI/Clean.html">Bundler::CLI::Clean</a></li>
        
          <li><a href="../Bundler/CLI/Common.html">Bundler::CLI::Common</a></li>
        
          <li><a href="../Bundler/CLI/Config.html">Bundler::CLI::Config</a></li>
        
          <li><a href="../Bundler/CLI/Console.html">Bundler::CLI::Console</a></li>
        
          <li><a href="../Bundler/CLI/Exec.html">Bundler::CLI::Exec</a></li>
        
          <li><a href="../Bundler/CLI/Gem.html">Bundler::CLI::Gem</a></li>
        
          <li><a href="../Bundler/CLI/Init.html">Bundler::CLI::Init</a></li>
        
          <li><a href="../Bundler/CLI/Inject.html">Bundler::CLI::Inject</a></li>
        
          <li><a href="../Bundler/CLI/Install.html">Bundler::CLI::Install</a></li>
        
          <li><a href="../Bundler/CLI/Open.html">Bundler::CLI::Open</a></li>
        
          <li><a href="../Bundler/CLI/Outdated.html">Bundler::CLI::Outdated</a></li>
        
          <li><a href="../Bundler/CLI/Package.html">Bundler::CLI::Package</a></li>
        
          <li><a href="../Bundler/CLI/Platform.html">Bundler::CLI::Platform</a></li>
        
          <li><a href="../Bundler/CLI/Show.html">Bundler::CLI::Show</a></li>
        
          <li><a href="../Bundler/CLI/Update.html">Bundler::CLI::Update</a></li>
        
          <li><a href="../Bundler/CLI/Viz.html">Bundler::CLI::Viz</a></li>
        
          <li><a href="../Bundler/CurrentRuby.html">Bundler::CurrentRuby</a></li>
        
          <li><a href="../Bundler/CyclicDependencyError.html">Bundler::CyclicDependencyError</a></li>
        
          <li><a href="../Bundler/Definition.html">Bundler::Definition</a></li>
        
          <li><a href="../Bundler/DepProxy.html">Bundler::DepProxy</a></li>
        
          <li><a href="../Bundler/Dependency.html">Bundler::Dependency</a></li>
        
          <li><a href="../Bundler/Deployment.html">Bundler::Deployment</a></li>
        
          <li><a href="../Bundler/Deprecate.html">Bundler::Deprecate</a></li>
        
          <li><a href="../Bundler/DeprecatedError.html">Bundler::DeprecatedError</a></li>
        
          <li><a href="../Bundler/Dsl.html">Bundler::Dsl</a></li>
        
          <li><a href="../Bundler/EndpointSpecification.html">Bundler::EndpointSpecification</a></li>
        
          <li><a href="../Bundler/Env.html">Bundler::Env</a></li>
        
          <li><a href="../Bundler/Environment.html">Bundler::Environment</a></li>
        
          <li><a href="../Bundler/Fetcher.html">Bundler::Fetcher</a></li>
        
          <li><a href="../Bundler/Fetcher/AuthenticationRequiredError.html">Bundler::Fetcher::AuthenticationRequiredError</a></li>
        
          <li><a href="../Bundler/Fetcher/BadAuthenticationError.html">Bundler::Fetcher::BadAuthenticationError</a></li>
        
          <li><a href="../Bundler/Fetcher/CertificateFailureError.html">Bundler::Fetcher::CertificateFailureError</a></li>
        
          <li><a href="../Bundler/Fetcher/FallbackError.html">Bundler::Fetcher::FallbackError</a></li>
        
          <li><a href="../Bundler/Fetcher/SSLError.html">Bundler::Fetcher::SSLError</a></li>
        
          <li><a href="../Bundler/GemHelper.html">Bundler::GemHelper</a></li>
        
          <li><a href="../Bundler/GemHelpers.html">Bundler::GemHelpers</a></li>
        
          <li><a href="../Bundler/GemInstaller.html">Bundler::GemInstaller</a></li>
        
          <li><a href="../Bundler/GemNotFound.html">Bundler::GemNotFound</a></li>
        
          <li><a href="../Bundler/GemfileError.html">Bundler::GemfileError</a></li>
        
          <li><a href="../Bundler/GemfileLockNotFound.html">Bundler::GemfileLockNotFound</a></li>
        
          <li><a href="../Bundler/GemfileNotFound.html">Bundler::GemfileNotFound</a></li>
        
          <li><a href="../Bundler/GemspecError.html">Bundler::GemspecError</a></li>
        
          <li><a href="../Bundler/GitError.html">Bundler::GitError</a></li>
        
          <li><a href="../Bundler/Graph.html">Bundler::Graph</a></li>
        
          <li><a href="../Bundler/Graph/GraphVizClient.html">Bundler::Graph::GraphVizClient</a></li>
        
          <li><a href="../Bundler/HTTPError.html">Bundler::HTTPError</a></li>
        
          <li><a href="../Bundler/Index.html">Bundler::Index</a></li>
        
          <li><a href="../Bundler/Injector.html">Bundler::Injector</a></li>
        
          <li><a href="../Bundler/InstallError.html">Bundler::InstallError</a></li>
        
          <li><a href="../Bundler/InstallHookError.html">Bundler::InstallHookError</a></li>
        
          <li><a href="../Bundler/Installer.html">Bundler::Installer</a></li>
        
          <li><a href="../Bundler/InvalidOption.html">Bundler::InvalidOption</a></li>
        
          <li><a href="../Bundler/LazySpecification.html">Bundler::LazySpecification</a></li>
        
          <li><a href="../Bundler/LockfileError.html">Bundler::LockfileError</a></li>
        
          <li><a href="../Bundler/LockfileParser.html">Bundler::LockfileParser</a></li>
        
          <li><a href="../Bundler/MarshalError.html">Bundler::MarshalError</a></li>
        
          <li><a href="../Bundler/MatchPlatform.html">Bundler::MatchPlatform</a></li>
        
          <li><a href="../Bundler/ParallelWorkers.html">Bundler::ParallelWorkers</a></li>
        
          <li><a href="../Bundler/ParallelWorkers/ThreadWorker.html">Bundler::ParallelWorkers::ThreadWorker</a></li>
        
          <li><a href="../Bundler/ParallelWorkers/UnixWorker.html">Bundler::ParallelWorkers::UnixWorker</a></li>
        
          <li><a href="../Bundler/ParallelWorkers/UnixWorker/JobHandler.html">Bundler::ParallelWorkers::UnixWorker::JobHandler</a></li>
        
          <li><a href="../Bundler/ParallelWorkers/Worker.html">Bundler::ParallelWorkers::Worker</a></li>
        
          <li><a href="../Bundler/ParallelWorkers/Worker/WrappedException.html">Bundler::ParallelWorkers::Worker::WrappedException</a></li>
        
          <li><a href="../Bundler/PathError.html">Bundler::PathError</a></li>
        
          <li><a href="../Bundler/ProductionError.html">Bundler::ProductionError</a></li>
        
          <li><a href="../Bundler/RemoteSpecification.html">Bundler::RemoteSpecification</a></li>
        
          <li><a href="../Bundler/Resolver.html">Bundler::Resolver</a></li>
        
          <li><a href="../Bundler/Resolver/SpecGroup.html">Bundler::Resolver::SpecGroup</a></li>
        
          <li><a href="../Bundler/Resolver/State.html">Bundler::Resolver::State</a></li>
        
          <li><a href="../Bundler/Retry.html">Bundler::Retry</a></li>
        
          <li><a href="../Bundler/RubyDsl.html">Bundler::RubyDsl</a></li>
        
          <li><a href="../Bundler/RubyVersion.html">Bundler::RubyVersion</a></li>
        
          <li><a href="../Bundler/RubyVersionMismatch.html">Bundler::RubyVersionMismatch</a></li>
        
          <li><a href="../Bundler/RubygemsIntegration.html">Bundler::RubygemsIntegration</a></li>
        
          <li><a href="../Bundler/RubygemsIntegration/AlmostModern.html">Bundler::RubygemsIntegration::AlmostModern</a></li>
        
          <li><a href="../Bundler/RubygemsIntegration/Ancient.html">Bundler::RubygemsIntegration::Ancient</a></li>
        
          <li><a href="../Bundler/RubygemsIntegration/Future.html">Bundler::RubygemsIntegration::Future</a></li>
        
          <li><a href="../Bundler/RubygemsIntegration/Gem.html">Bundler::RubygemsIntegration::Gem</a></li>
        
          <li><a href="../Bundler/RubygemsIntegration/Legacy.html">Bundler::RubygemsIntegration::Legacy</a></li>
        
          <li><a href="../Bundler/RubygemsIntegration/Legacy/Gem/SourceIndex.html">Bundler::RubygemsIntegration::Legacy::Gem::SourceIndex</a></li>
        
          <li><a href="../Bundler/RubygemsIntegration/Modern.html">Bundler::RubygemsIntegration::Modern</a></li>
        
          <li><a href="../Bundler/RubygemsIntegration/MoreModern.html">Bundler::RubygemsIntegration::MoreModern</a></li>
        
          <li><a href="../Bundler/RubygemsIntegration/Transitional.html">Bundler::RubygemsIntegration::Transitional</a></li>
        
          <li><a href="../Bundler/Runtime.html">Bundler::Runtime</a></li>
        
          <li><a href="../Bundler/SecurityError.html">Bundler::SecurityError</a></li>
        
          <li><a href="../Bundler/Settings.html">Bundler::Settings</a></li>
        
          <li><a href="../Bundler/SharedHelpers.html">Bundler::SharedHelpers</a></li>
        
          <li><a href="../Bundler/SimilarityDetector.html">Bundler::SimilarityDetector</a></li>
        
          <li><a href="../Bundler/Source.html">Bundler::Source</a></li>
        
          <li><a href="../Bundler/Source/Git.html">Bundler::Source::Git</a></li>
        
          <li><a href="../Bundler/Source/Git/GitCommandError.html">Bundler::Source::Git::GitCommandError</a></li>
        
          <li><a href="../Bundler/Source/Git/GitNotAllowedError.html">Bundler::Source::Git::GitNotAllowedError</a></li>
        
          <li><a href="../Bundler/Source/Git/GitNotInstalledError.html">Bundler::Source::Git::GitNotInstalledError</a></li>
        
          <li><a href="../Bundler/Source/Git/GitProxy.html">Bundler::Source::Git::GitProxy</a></li>
        
          <li><a href="../Bundler/Source/Path.html">Bundler::Source::Path</a></li>
        
          <li><a href="../Bundler/Source/Path/Installer.html">Bundler::Source::Path::Installer</a></li>
        
          <li><a href="../Bundler/Source/Rubygems.html">Bundler::Source::Rubygems</a></li>
        
          <li><a href="../Bundler/SpecSet.html">Bundler::SpecSet</a></li>
        
          <li><a href="../Bundler/SystemRubyVersion.html">Bundler::SystemRubyVersion</a></li>
        
          <li><a href="../Bundler/UI.html">Bundler::UI</a></li>
        
          <li><a href="../Bundler/UI/RGProxy.html">Bundler::UI::RGProxy</a></li>
        
          <li><a href="../Bundler/UI/Shell.html">Bundler::UI::Shell</a></li>
        
          <li><a href="../Bundler/UI/Silent.html">Bundler::UI::Silent</a></li>
        
          <li><a href="../Bundler/VersionConflict.html">Bundler::VersionConflict</a></li>
        
          <li><a href="../Gem.html">Gem</a></li>
        
          <li><a href="../Gem/Dependency.html">Gem::Dependency</a></li>
        
          <li><a href="../Gem/Platform.html">Gem::Platform</a></li>
        
          <li><a href="../Gem/Requirement.html">Gem::Requirement</a></li>
        
          <li><a href="../Gem/Specification.html">Gem::Specification</a></li>
        
          <li><a href="../Object.html">Object</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div>

  <div id="documentation">
    <h1 class="class">Bundler::Installer</h1>

    <div id="description" class="description">
      
    </div><!-- description -->

    
    
    
    <div id="5Buntitled-5D" class="documentation-section">
      

      

      

      
      <!-- Attributes -->
      <div id="attribute-method-details" class="method-section section">
        <h3 class="section-header">Attributes</h3>

        
        <div id="post_install_messages-attribute-method" class="method-detail">
          <a name="post_install_messages"></a>
          
          <a name="post_install_messages="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">post_install_messages</span><span
              class="attribute-access-type">[RW]</span>
          </div>

          <div class="method-description">
          
          
          
          </div>
        </div>
        
      </div><!-- attribute-method-details -->
      

      <!-- Methods -->
      
      <div id="public-class-method-details" class="method-section section">
        <h3 class="section-header">Public Class Methods</h3>

      
        <div id="install-method" class="method-detail ">
          <a name="method-c-install"></a>

          
          <div class="method-heading">
            <span class="method-name">install</span><span
              class="method-args">(root, definition, options = {})</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Begins the installation process for <a href="../Bundler.html">Bundler</a>.
For more information see the <a href="Installer.html#method-i-run">run</a>
method on this class.</p>
            

            
            <div class="method-source-code" id="install-source">
<pre>
<span class="ruby-comment"># File lib/bundler/installer.rb, line 13</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">install</span>(<span class="ruby-identifier">root</span>, <span class="ruby-identifier">definition</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">installer</span> = <span class="ruby-identifier">new</span>(<span class="ruby-identifier">root</span>, <span class="ruby-identifier">definition</span>)
  <span class="ruby-identifier">installer</span>.<span class="ruby-identifier">run</span>(<span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">installer</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- install-source -->
            
          </div>

          

          
        </div><!-- install-method -->

      
      </div><!-- public-class-method-details -->
    
      <div id="public-instance-method-details" class="method-section section">
        <h3 class="section-header">Public Instance Methods</h3>

      
        <div id="generate_bundler_executable_stubs-method" class="method-detail ">
          <a name="method-i-generate_bundler_executable_stubs"></a>

          
          <div class="method-heading">
            <span class="method-name">generate_bundler_executable_stubs</span><span
              class="method-args">(spec, options = {})</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="generate_bundler_executable_stubs-source">
<pre>
<span class="ruby-comment"># File lib/bundler/installer.rb, line 140</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">generate_bundler_executable_stubs</span>(<span class="ruby-identifier">spec</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:binstubs_cmd</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">executables</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-identifier">options</span> = {}
    <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">runtime_dependencies</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dep</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">bins</span> = <span class="ruby-ivar">@definition</span>.<span class="ruby-identifier">specs</span>[<span class="ruby-identifier">dep</span>].<span class="ruby-identifier">first</span>.<span class="ruby-identifier">executables</span>
      <span class="ruby-identifier">options</span>[<span class="ruby-identifier">dep</span>.<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">bins</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">bins</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">any?</span>
      <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;#{spec.name} has no executables, but you may want &quot;</span> <span class="ruby-operator">+</span>
        <span class="ruby-string">&quot;one from a gem it depends on.&quot;</span>
      <span class="ruby-identifier">options</span>.<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">name</span>,<span class="ruby-identifier">bins</span><span class="ruby-operator">|</span> <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;  #{name} has: #{bins.join(', ')}&quot;</span> }
    <span class="ruby-keyword">else</span>
      <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;There are no executables for the gem #{spec.name}.&quot;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># double-assignment to avoid warnings about variables that will be used by ERB</span>
  <span class="ruby-identifier">bin_path</span> = <span class="ruby-identifier">bin_path</span> = <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">bin_path</span>
  <span class="ruby-identifier">template</span> = <span class="ruby-identifier">template</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-string">'../templates/Executable'</span>, <span class="ruby-keyword">__FILE__</span>))
  <span class="ruby-identifier">relative_gemfile_path</span> = <span class="ruby-identifier">relative_gemfile_path</span> = <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">default_gemfile</span>.<span class="ruby-identifier">relative_path_from</span>(<span class="ruby-identifier">bin_path</span>)
  <span class="ruby-identifier">ruby_command</span> = <span class="ruby-identifier">ruby_command</span> = <span class="ruby-constant">Thor</span><span class="ruby-operator">::</span><span class="ruby-constant">Util</span>.<span class="ruby-identifier">ruby_command</span>

  <span class="ruby-identifier">exists</span> = []
  <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">executables</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">executable</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">executable</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;bundle&quot;</span>

    <span class="ruby-identifier">binstub_path</span> = <span class="ruby-node">&quot;#{bin_path}/#{executable}&quot;</span>
    <span class="ruby-keyword">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">binstub_path</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">options</span>[<span class="ruby-value">:force</span>]
      <span class="ruby-identifier">exists</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">executable</span>
      <span class="ruby-keyword">next</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">binstub_path</span>, <span class="ruby-string">'w'</span>, <span class="ruby-value">0777</span> &amp; <span class="ruby-operator">~</span><span class="ruby-constant">File</span>.<span class="ruby-identifier">umask</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-constant">ERB</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">template</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-string">'-'</span>).<span class="ruby-identifier">result</span>(<span class="ruby-identifier">binding</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:binstubs_cmd</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">exists</span>.<span class="ruby-identifier">any?</span>
    <span class="ruby-keyword">case</span> <span class="ruby-identifier">exists</span>.<span class="ruby-identifier">size</span>
    <span class="ruby-keyword">when</span> <span class="ruby-value">1</span>
      <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;Skipped #{exists[0]} since it already exists.&quot;</span>
    <span class="ruby-keyword">when</span> <span class="ruby-value">2</span>
      <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;Skipped #{exists.join(' and ')} since they already exist.&quot;</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">items</span> = <span class="ruby-identifier">exists</span>[<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-value">-1</span>].<span class="ruby-identifier">empty?</span> <span class="ruby-operator">?</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">exists</span>[<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-value">-1</span>].<span class="ruby-identifier">join</span>(<span class="ruby-string">', '</span>)
      <span class="ruby-identifier">skipped</span> = [<span class="ruby-identifier">items</span>, <span class="ruby-identifier">exists</span>[<span class="ruby-value">-1</span>]].<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">' and '</span>)
      <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;Skipped #{skipped} since they already exist.&quot;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">warn</span> <span class="ruby-string">&quot;If you want to overwrite skipped stubs, use --force.&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- generate_bundler_executable_stubs-source -->
            
          </div>

          

          
        </div><!-- generate_bundler_executable_stubs-method -->

      
        <div id="install_gem_from_spec-method" class="method-detail ">
          <a name="method-i-install_gem_from_spec"></a>

          
          <div class="method-heading">
            <span class="method-name">install_gem_from_spec</span><span
              class="method-args">(spec, standalone = false, worker = 0)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="install_gem_from_spec-source">
<pre>
<span class="ruby-comment"># File lib/bundler/installer.rb, line 98</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">install_gem_from_spec</span>(<span class="ruby-identifier">spec</span>, <span class="ruby-identifier">standalone</span> = <span class="ruby-keyword">false</span>, <span class="ruby-identifier">worker</span> = <span class="ruby-value">0</span>)
  <span class="ruby-comment"># Fetch the build settings, if there are any</span>
  <span class="ruby-identifier">settings</span>             = <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">settings</span>[<span class="ruby-node">&quot;build.#{spec.name}&quot;</span>]
  <span class="ruby-identifier">install_message</span>      = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">post_install_message</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">debug_message</span>        = <span class="ruby-keyword">nil</span>
  <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">rubygems</span>.<span class="ruby-identifier">with_build_args</span> [<span class="ruby-identifier">settings</span>] <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">install_message</span>, <span class="ruby-identifier">post_install_message</span>, <span class="ruby-identifier">debug_message</span> = <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">source</span>.<span class="ruby-identifier">install</span>(<span class="ruby-identifier">spec</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">install_message</span>.<span class="ruby-identifier">include?</span> <span class="ruby-string">'Installing'</span>
      <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">confirm</span> <span class="ruby-identifier">install_message</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">info</span> <span class="ruby-identifier">install_message</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">debug</span> <span class="ruby-identifier">debug_message</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">debug_message</span>
    <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">debug</span> <span class="ruby-node">&quot;#{worker}:  #{spec.name} (#{spec.version}) from #{spec.loaded_from}&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">settings</span>[<span class="ruby-value">:bin</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">standalone</span>
    <span class="ruby-identifier">generate_standalone_bundler_executable_stubs</span>(<span class="ruby-identifier">spec</span>)
  <span class="ruby-keyword">elsif</span> <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">settings</span>[<span class="ruby-value">:bin</span>]
    <span class="ruby-identifier">generate_bundler_executable_stubs</span>(<span class="ruby-identifier">spec</span>, <span class="ruby-value">:force</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">post_install_message</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
  <span class="ruby-comment"># if install hook failed or gem signature is bad, just die</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-identifier">e</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Bundler</span><span class="ruby-operator">::</span><span class="ruby-constant">InstallHookError</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Bundler</span><span class="ruby-operator">::</span><span class="ruby-constant">SecurityError</span>)

  <span class="ruby-comment"># other failure, likely a native extension build failure</span>
  <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">info</span> <span class="ruby-string">&quot;&quot;</span>
  <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;#{e.class}: #{e.message}&quot;</span>
  <span class="ruby-identifier">msg</span> = <span class="ruby-node">&quot;An error occurred while installing #{spec.name} (#{spec.version}),&quot;</span>
  <span class="ruby-identifier">msg</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot; and Bundler cannot continue.&quot;</span>

  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">source</span>.<span class="ruby-identifier">options</span>[<span class="ruby-string">&quot;git&quot;</span>]
    <span class="ruby-identifier">msg</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot;\nMake sure that `gem install&quot;</span>
    <span class="ruby-identifier">msg</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot; #{spec.name} -v '#{spec.version}'` succeeds before bundling.&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">debug</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">backtrace</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;\n&quot;</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">Bundler</span><span class="ruby-operator">::</span><span class="ruby-constant">InstallError</span>, <span class="ruby-identifier">msg</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- install_gem_from_spec-source -->
            
          </div>

          

          
        </div><!-- install_gem_from_spec-method -->

      
        <div id="run-method" class="method-detail ">
          <a name="method-i-run"></a>

          
          <div class="method-heading">
            <span class="method-name">run</span><span
              class="method-args">(options)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Runs the install procedures for a specific Gemfile.</p>

<p>Firstly, this method will check to see if <a
href="../Bundler.html#method-c-bundle_path">Bundler.bundle_path</a> exists
and if not then will create it. This is usually the location of gems on the
system, be it RVM or at a system path.</p>

<p>Secondly, it checks if <a href="../Bundler.html">Bundler</a> has been
configured to be "frozen" Frozen ensures that the Gemfile and the
Gemfile.lock file are matching. This stops a situation where a developer
may update the Gemfile but may not run `bundle install`, which leads to the
Gemfile.lock file not being correctly updated. If this file is not
correctly updated then any other developer running `bundle install` will
potentially not install the correct gems.</p>

<p>Thirdly, <a href="../Bundler.html">Bundler</a> checks if there are any
dependencies specified in the Gemfile using <a
href="Environment.html#method-i-dependencies">Bundler::Environment#dependencies</a>.
If there are no dependencies specified then <a
href="../Bundler.html">Bundler</a> returns a warning message stating so and
this method returns.</p>

<p>Fourthly, <a href="../Bundler.html">Bundler</a> checks if the default
lockfile (Gemfile.lock) exists, and if so then proceeds to set up a
defintion based on the default gemfile (Gemfile) and the default lock file
(Gemfile.lock). However, this is not the case if the platform is different
to that which is specified in Gemfile.lock, or if there are any missing
specs for the gems.</p>

<p>Fifthly, <a href="../Bundler.html">Bundler</a> resolves the dependencies
either through a cache of gems or by remote. This then leads into the gems
being installed, along with stubs for their executables, but only if the
--binstubs option has been passed or <a
href="http://:bin">Bundler.options</a> has been set earlier.</p>

<p>Sixthly, a new Gemfile.lock is created from the installed gems to ensure
that the next time that a user runs `bundle install` they will receive any
updates from this process.</p>

<p>Finally: TODO add documentation for how the standalone process works.</p>
            

            
            <div class="method-source-code" id="run-source">
<pre>
<span class="ruby-comment"># File lib/bundler/installer.rb, line 50</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">run</span>(<span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">create_bundle_path</span>

  <span class="ruby-keyword">if</span> <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">settings</span>[<span class="ruby-value">:frozen</span>]
    <span class="ruby-ivar">@definition</span>.<span class="ruby-identifier">ensure_equivalent_gemfile_and_lockfile</span>(<span class="ruby-identifier">options</span>[<span class="ruby-value">:deployment</span>])
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">dependencies</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">warn</span> <span class="ruby-string">&quot;The Gemfile specifies no dependencies&quot;</span>
    <span class="ruby-identifier">lock</span>
    <span class="ruby-keyword">return</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">default_lockfile</span>.<span class="ruby-identifier">exist?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">options</span>[<span class="ruby-string">&quot;update&quot;</span>]
    <span class="ruby-identifier">local</span> = <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">silence</span> <span class="ruby-keyword">do</span>
      <span class="ruby-keyword">begin</span>
        <span class="ruby-identifier">tmpdef</span> = <span class="ruby-constant">Definition</span>.<span class="ruby-identifier">build</span>(<span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">default_gemfile</span>, <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">default_lockfile</span>, <span class="ruby-keyword">nil</span>)
        <span class="ruby-keyword">true</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">tmpdef</span>.<span class="ruby-identifier">new_platform?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tmpdef</span>.<span class="ruby-identifier">missing_specs</span>.<span class="ruby-identifier">any?</span>
      <span class="ruby-keyword">rescue</span> <span class="ruby-constant">BundlerError</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># Since we are installing, we can resolve the definition</span>
  <span class="ruby-comment"># using remote specs</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">local</span>
    <span class="ruby-identifier">options</span>[<span class="ruby-string">&quot;local&quot;</span>] <span class="ruby-operator">?</span> <span class="ruby-ivar">@definition</span>.<span class="ruby-identifier">resolve_with_cache!</span> <span class="ruby-operator">:</span> <span class="ruby-ivar">@definition</span>.<span class="ruby-identifier">resolve_remotely!</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment"># Must install gems in the order that the resolver provides</span>
  <span class="ruby-comment"># as dependencies might actually affect the installation of</span>
  <span class="ruby-comment"># the gem.</span>
  <span class="ruby-constant">Installer</span>.<span class="ruby-identifier">post_install_messages</span> = {}

  <span class="ruby-comment"># the order that the resolver provides is significant, since</span>
  <span class="ruby-comment"># dependencies might actually affect the installation of a gem.</span>
  <span class="ruby-comment"># that said, it's a rare situation (other than rake), and parallel</span>
  <span class="ruby-comment"># installation is just SO MUCH FASTER. so we let people opt in.</span>
  <span class="ruby-identifier">jobs</span> = [<span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">settings</span>[<span class="ruby-value">:jobs</span>].<span class="ruby-identifier">to_i</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>, <span class="ruby-value">1</span>].<span class="ruby-identifier">max</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">jobs</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">can_install_parallely?</span>
    <span class="ruby-identifier">install_in_parallel</span> <span class="ruby-identifier">jobs</span>, <span class="ruby-identifier">options</span>[<span class="ruby-value">:standalone</span>]
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">install_sequentially</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:standalone</span>]
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">lock</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">settings</span>[<span class="ruby-value">:frozen</span>]
  <span class="ruby-identifier">generate_standalone</span>(<span class="ruby-identifier">options</span>[<span class="ruby-value">:standalone</span>]) <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:standalone</span>]
<span class="ruby-keyword">end</span></pre>
            </div><!-- run-source -->
            
          </div>

          

          
        </div><!-- run-method -->

      
      </div><!-- public-instance-method-details -->
    
    </div><!-- 5Buntitled-5D -->
  

  </div><!-- documentation -->

  <div id="validator-badges">
    <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
    <p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
      Rdoc Generator</a> 2</small>.</p>
  </div>

</body>
</html>

